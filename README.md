# Huffman Coding Project — Phase 3: Decoder  
**Name:** Zainab Ghafoor  
**ID:** 008259427  
**GitHub repository link:** [https://github.com/zainabghafoor0/project3_p3.git](https://github.com/zainabghafoor0/project3_p3.git)

---

## Overview
This phase completes the Huffman Coding system by implementing the **Huffman Decoder**, which reconstructs the original text from its encoded representation.  

While **Phase 2** built the Huffman Tree and generated `.hdr`, `.freq`, and `.code` files during encoding, **Phase 3** performs the inverse operation:
it **rebuilds the Huffman Tree from the header**, decodes the binary code stream, and **recreates the original tokens** exactly as they appeared before compression.

Given a `.hdr` and `.code` file, the program outputs:
- A `.tokens_decoded` file identical to the original `.tokens` file generated by the encoder.  

---

## Directory Structure
```
project/
├─ HuffmanTree.hpp
├─ HuffmanTree.cpp
├─ main.cpp
├─ Makefile
└─ input_output/
   ├─ TheBells.hdr
   ├─ TheBells.code
   ├─ TheBells.tokens
   ├─ TheBells.freq
   └─ TheBells.txt
```

---

## Compilation
To build the decoder executable, run:
```bash
make
```

This produces:
```
./huff_decode.x
```

To remove old build files:
```bash
make clean
```

---

## Running the Program
Place the `.hdr` and `.code` files inside the `input_output/` directory, then run:
```bash
./huff_decode.x input_output/TheBells.hdr input_output/TheBells.code
```

**Output file generated:**
```
input_output/TheBells.tokens_decoded
```

To verify correctness:
```bash
diff input_output/TheBells.tokens_decoded input_output/TheBells.tokens
```
If there is **no output**, the decoding is successful.

---

## Implementation Details

### 1️⃣ HuffmanTree
- Reconstructs the Huffman tree using pairs of `(word, code)` from the `.hdr` file.  
- Each line of `.hdr` contains a **word** and its **binary Huffman code**.  
- Builds the tree by traversing from the root:  
  - `0` → go to / create left child  
  - `1` → go to / create right child  
  - The final node stores the word.

### 2️⃣ Decoder Logic
- Reads the `.code` file character by character.  
- Traverses the tree according to each bit (`0` → left, `1` → right).  
- When a leaf node is reached, outputs the corresponding word to `.tokens_decoded` and resets to the root.  
- Ignores newline and whitespace characters in the `.code` stream.

### 3️⃣ Error Handling
- Verifies both input files exist and are readable.  
- Checks that the `.hdr` starts with a word and `.code` starts with binary digits.  
- Detects and reports:
  - Invalid bit sequences.  
  - Duplicated or conflicting Huffman codes.  
  - Truncated code streams (ending mid-symbol).  

---

## Example Workflow
```bash
# 1. Build the decoder
make

# 2. Run on sample files
./huff_decode.x input_output/TheBells.hdr input_output/TheBells.code

# 3. Verify decoded output matches the original
diff input_output/TheBells.tokens_decoded input_output/TheBells.tokens
```

**Example terminal output:**
```
Decoded -> input_output/TheBells.tokens_decoded
```

---

## Implementation Notes
- The program uses **streaming I/O** for decoding (memory-efficient).  
- Tree construction and traversal mirror the encoder logic from previous phases.  
- Default output format is one token per line; this can be changed to space-separated output if needed.  

---

## Summary
| Component | Input | Output | Description |
|------------|--------|---------|-------------|
| **HuffmanTree::buildFromHeader()** | `.hdr` | Internal Tree | Reconstructs Huffman structure |
| **HuffmanTree::decode()** | `.code`, Tree | `.tokens_decoded` | Restores original words |
| **Main Program** | File paths | Console + Output file | Coordinates reading, decoding, and writing |

---

### Project Highlights
✅ Robust error handling and validation  
✅ Efficient bit-by-bit streaming decode  
✅ Perfect reversibility (matches `.tokens` file)  
✅ Follows clear modular design mirroring encoder  
